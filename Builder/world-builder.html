<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>World Builder</title>
    <style>
        body { font-family: sans-serif; padding: 1rem; }
        #grid { display: grid; grid-template-columns: repeat(20, 32px); grid-auto-rows: 32px; gap: 1px; }
        .cell { width: 32px; height: 32px; background: #eee; border: 1px solid #ccc; cursor: pointer; background-size: cover; }
        #tilePicker img { width: 32px; height: 32px; cursor: pointer; border: 2px solid transparent; }
        #tilePicker img.selected { border-color: red; }
    </style>
</head>
<body>

<h2>World Builder</h2>

<div id="tilePicker"></div>
<br>
<div id="grid"></div>
<br>
<button onclick="exportMap()">Export Map</button>
<pre id="output"></pre>

<script>
    const imageUrls = [
        null, // 0 - Air (empty tile)
        'Sprites/GroundBlock.png',
        'Sprites/MysteryBlock1.png',
        'Sprites/Brick.png',
        'Sprites/HardBlock.png',
        'Sprites/Pipe1.png',
        'Sprites/Pipe2.png',
        'Sprites/Pipe3.png',
        'Sprites/Hill1.png',
        'Sprites/Hill2.png',
        'Sprites/Cloud1.png',
        'Sprites/Cloud2.png',
        'Sprites/Cloud3.png',
        'Sprites/Castle.png',
        'Sprites/FlagPole.png',
        'Sprites/Flag.png',
        'Sprites/Bush1.png',
        'Sprites/Bush2.png',
        'Sprites/Bush3.png',
        'Sprites/Edge.png',
        'Sprites/title.png',
        'Sprites/Edge2.png',
        'Sprites/UndergroundBlock.png',
        'Sprites/UndergroundBrick.png'
    ];

    const ROWS = 15;
    const COLS = 20;
    let currentTile = 1; // Default selected tile
    const map = Array.from({ length: ROWS }, () => Array(COLS).fill(0));

    // Tile picker
    const tilePicker = document.getElementById('tilePicker');
    imageUrls.forEach((url, index) => {
        const img = document.createElement('img');
        img.src = url || 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=='; // Transparent placeholder
        img.onclick = () => {
            currentTile = index;
            document.querySelectorAll('#tilePicker img').forEach(i => i.classList.remove('selected'));
            img.classList.add('selected');
        };
        if (index === 1) img.classList.add('selected');
        tilePicker.appendChild(img);
    });

    // Build grid
    const grid = document.getElementById('grid');
    for (let y = 0; y < ROWS; y++) {
        for (let x = 0; x < COLS; x++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.onclick = () => {
                map[y][x] = currentTile;
                cell.style.backgroundImage = imageUrls[currentTile] ? `url(${imageUrls[currentTile]})` : '';
            };
            grid.appendChild(cell);
        }
    }

    function exportMap() {
        document.getElementById('output').textContent = JSON.stringify(map, null, 2);
    }
</script>

</body>
</html>
